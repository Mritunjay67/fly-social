<!doctype html>
<html lang="en" class="h-full">
    <head>
        <title>FLY Social - Forgot Password</title>
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>FLY Social - Forgot Password</title>
        <script src="https://cdn.tailwindcss.com"></script>
        <style>
            body { box-sizing: border-box; font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif; }
            .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%); }
            .glass-effect { background: rgba(255,255,255,0.95); backdrop-filter: blur(20px); border: 1px solid rgba(255,255,255,0.2); }
            .gradient-text { background: linear-gradient(135deg,#667eea,#764ba2); -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text; }
            .gradient-button { background: linear-gradient(135deg,#667eea,#764ba2); }
            .gradient-button:hover { background: linear-gradient(135deg,#5a67d8,#6b46c1); }
            .input-focus:focus { border-color:#667eea; box-shadow:0 0 0 4px rgba(102,126,234,0.1); }
            .slide-up { animation: slideUp 0.6s ease-out; }
            @keyframes slideUp { from { opacity:0; transform:translateY(30px); } to { opacity:1; transform:translateY(0); } }
            .spinner { animation: spin 1s linear infinite; }
            @keyframes spin { 0%{ transform:rotate(0deg); } 100%{ transform:rotate(360deg); } }
            .logo img { width:80px; height:80px; }
        </style>
    </head>

    <body class="h-full gradient-bg flex items-center justify-center p-4">
        <main class="glass-effect rounded-3xl p-10 w-full max-w-md shadow-2xl slide-up">
            <div id="forgot-form">

                <div class="text-center mb-8">

                    <!--Logo Image -->
                    <div class="logo inline-flex items-center justify-center w-auto h-20  rounded-2xl mb-4 shadow-lg">
                        <img src="images/fly-logo.png" alt="FLY Social Logo">
                    </div>

                    <!-- Company Name -->
                    <h1 class="text-3xl font-bold gradient-text mb-1">FLY Social</h1>
                </div>

                <div class="text-center mb-8">
                    <h2 class="text-2xl font-semibold text-gray-900 mb-2">Forgot Your Password?</h2>
                    <p class="text-gray-600">No problem. Enter your email and we'll send you a reset link.</p>
                </div>
                <!-- Form of Input -->
                <form id="forgotForm" onsubmit="handleForgot(event)" class="space-y-6">
                    <div class="relative">
                        <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                            <svg class="w-5 h-5 text-gray-400" fill="currentColor" viewBox="0 0 24 24"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/></svg>
                        </div>

                <!-- Email box -->
                        <input type="email" id="email" class="w-full pl-12 pr-4 py-4 border-2 border-gray-200 rounded-xl input-focus transition-all duration-300 bg-white/80" placeholder="Your Email Address" required>
                    </div>

                <!-- Submit Button -->
                    <div id="message" class="text-center text-sm hidden"></div>
                    <button type="submit" class="w-full gradient-button text-white py-4 rounded-xl font-semibold hover:shadow-lg transform hover:-translate-y-0.5 transition-all duration-300 relative overflow-hidden flex items-center justify-center">
                        <span class="button-text">Send Reset Link</span>
                        <div class="button-loading absolute inset-0 hidden items-center justify-center">
                            <div class="w-5 h-5 border-2 border-white/30 border-t-white rounded-full spinner"></div>
                        </div>
                    </button>
                </form>

                <div class="text-center mt-6">
                    <p class="text-gray-600">Remembered your password? <a href="Login.html" class="text-indigo-600 hover:text-indigo-800 font-medium transition-colors duration-300">Back to Login</a></p>
                </div>

            </div>
        </main>

        <script>
            async function handleForgot(event) {
                event.preventDefault();

                const emailField = document.getElementById('email');
                const email = emailField.value;
                const button = document.querySelector('button[type="submit"]');
                const buttonText = button.querySelector('.button-text');
                const buttonLoading = button.querySelector('.button-loading');
                const messageDiv = document.getElementById('message');

                // Show loading state
                button.disabled = true;
                buttonText.classList.add('opacity-0');
                buttonLoading.classList.remove('hidden');
                buttonLoading.classList.add('flex');
                messageDiv.classList.add('hidden');

                try {
                    const response = await fetch('http://localhost:5000/forgot-password', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ email }),
                    });

                    const data = await response.json();

                    // Show the server's message
                    messageDiv.textContent = data.message || '';
                    if (response.ok) {
                        messageDiv.className = 'text-center text-sm text-green-600';
                    } else {
                        messageDiv.className = 'text-center text-sm text-red-600';
                    }
                    messageDiv.classList.remove('hidden');

                } catch (error) {
                    console.error('Forgot Password Error:', error);
                    messageDiv.textContent = 'Error connecting to server. Please try again.';
                    messageDiv.className = 'text-center text-sm text-red-600';
                    messageDiv.classList.remove('hidden');
                } finally {
                    // Hide loading state
                    button.disabled = false;
                    buttonText.classList.remove('opacity-0');
                    buttonLoading.classList.add('hidden');
                    buttonLoading.classList.remove('flex');
                }
            }
        </script>
    </body>
</html>